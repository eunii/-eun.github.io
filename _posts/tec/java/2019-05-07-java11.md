---
title: "[Java의정석] CH12. 쓰레드"
categories:
   [tec, java]
tags:
   [java]
   
toc: true
toc_label: "CH12. 쓰레드"

---

## 1. 프로세스와 쓰레드
프로세스(process)는 간단하게 말하면 실행중인 프로그램이다.  
**프로그램 --실행--> 프로세스**   
프로세스는 데이터, 메모리등의 자원과 쓰레드로 구성되어있음.  
프로세스의 자원을 이용해서 실제 작업을 수행하는 것.  
모든 프로세스는 최소 하나 이상의 쓰레드가 존재. 둘 이상이면 멀티쓰레드 프로세스라한다.  

- 멀티쓰레딩의 장점
    - CPU의 사용률을 향상시킴.
    - 자원을 보다 효울적으로 사용할 수 있음.
    - 사용자에 대한 응답성이 향상됨.
    - 작업이 분리되어 코드가 간결해짐. 

동기화(synhronization), 교착상태(deadlock)등을 고려해서 신중히 프로그래밍 해야함.

## 2. 쓰레드의 구현과 실행 
구현 방법
1. Thread클래스 상속
```java
class MyThread extends Thread{
    public void run(){
        //Thread의 run()함수를 오버라이딩.
    }
}
```
2. Runnable인터페이스 구현(일반적인 방법)
```java
class MyThread implements Runnable{
    public void  run(){
        //추상메서드 run()을 구현
    }
}
```
```java
class ThreadEx1{
    public static void main(String[] args){
      ThreadEx1_1 t1 = new ThreadEx1_1();
      
      Runnable r = new ThreadEx1_2();
      Thread t2 = new Thread(r);
    }
}

class ThreadEx1_1 extends Thread{
    public void run(){
        for(int i = 0; i < 5; i++) {
            System.out.println(getName());
        }
    }
}

class ThreadEx1_2 implements Runnable{
    public void run(){
        for(int i = 0; i < 5; i++) {
            System.out.println(Thread.currentThread().getName());
        }
    }
}
```
쓰레드 생성 후 start()를 호출해야 작업을 시작함.  
한번 사용한 쓰레드는 다시 재사용할 수 없다. 하나의 쓰레드에 한번의 start()만 호출 될 수 있음.  
```java
ThreadEx1_1 t1 = new ThreadEx_1();
t1.start();
t.start();//이건 불가능
```
```java
ThreadEx1_1 t1 = new ThreadEx1_1();
t1.start();
t1 = new ThreadEx1_1();
t.start();//이건 가능
```

## 3. start()와 run()
- run()을 호출하는 것은 생성된 쓰레드를 실행하는 것이 아니라 단순히 클래스에속한 메서드를 하나 호출하는것.  

---
call stack  

run  
main  
---  

- start()을 호출하는 것은 새로운 쓰레드가 작업을 실행하는데 필요한 호출스택을 생성한 후 run()을 호출해서 생성된 호출스택에 run()이 저장되게 한다.  
모든 쓰레드는 독립적인 작업을 수행하기 위해 자신만의 호출스택을 필요로 하기 때문에 새로운 쓰레드를 생성하고 실행시킬때마다 새로운 호출스택이 생성되고 쓰레드가 종료되면 작업에 사용된 호출스택은 소멸된다.  

1. main메서드에서 쓰레드의 start메서드를 호출한다.
2. start메서드는 쓰레드가 작업을 수행하는데 사용될 새로운 호출 스택을 생성한다. 
3. 생성된 호출스택에 run 메서드를 호출해서 쓰레드가 작업을 수행하도록 한다. 
4. 이제는 호츨스택이 2개이기때문에 스케줄러가 정한 순서에 으해 번갈아 가면서 실행된다.   

실행중인 쓰레드가 하나도 없을때 프로그램은 종료된다.

## 4. 싱글쓰레드와 멀티쓰레드